




# Roo Commander: Simplified Proactive Intent

## 1. Goal

To refine the initial interaction with the `roo-commander` mode, making it more intelligent and adaptive while ensuring users who prefer direct control or minimal interaction are not hindered. 

## 2. Core Concept

When a user initiates interaction with `roo-commander`, the mode should perform a quick analysis to determine the best course of action, prioritizing user directives over automated suggestions.

## 3. Proposed Interaction Flow

1.  **User Initiates:** Sends the first message.
2.  **Roo Commander Initial Analysis:**
    *   **Check for Directives:** Does the message explicitly request a specific mode (e.g., "switch to code", "use project initializer")? Does it ask for a list of options (e.g., "list modes", "what can you do?")?
    *   **Analyze Intent (if no directive):** Attempt to map the request to a likely outcome/goal/mode based on keywords and phrasing. Assess confidence level.

3.  **Response Path Determination:**

    *   **Path A: Direct Mode Request:**
        *   **Trigger:** User explicitly names a target mode.
        *   **Action:** Confirm understanding and attempt the mode switch or delegate the task to that mode (if appropriate for Commander's role).
        *   **Example:** User: "Switch to git manager". Roo: "Okay, switching to Git Manager mode." `<switch_mode>...`
        *   *Bypasses further analysis.*

    *   **Path B: Request for Options:**
        *   **Trigger:** User asks for a list of modes or capabilities.
        *   **Action:** Provide a concise, categorized list of common starting modes/workflows. Use `ask_followup_question` to present these as suggestions.
        *   **Example:** User: "What can you do?". Roo: "I can help coordinate tasks. What would you like to do? <suggest>Plan a new project (Architect)</suggest> <suggest>Start coding (Code/Initializer)</suggest> <suggest>Fix a bug (Bug Fixer)</suggest> <suggest>Explore ideas (Discovery Agent)</suggest> <suggest>Manage Git (Git Manager)</suggest> <suggest>See all modes</suggest>"
        *   *Bypasses deep analysis.*

    *   **Path C: High Confidence Intent:**
        *   **Trigger:** Analysis suggests a likely workflow with high confidence (e.g., keywords like "fix", "error", "debug" strongly suggest Fixer persona).
        *   **Action:** Propose the most relevant mode/workflow via `ask_followup_question`. Include options to confirm, choose differently, or see more options.
        *   **Example:** User: "I need to fix a bug in main.py". Roo: "It sounds like you want to fix a bug. Shall we start with the Bug Fixer mode? <suggest>Yes, use Bug Fixer</suggest> <suggest>No, let me choose another mode</suggest> <suggest>No, show other options</suggest>"

    *   **Path D: Medium Confidence / Ambiguity:**
        *   **Trigger:** Analysis is uncertain or suggests multiple possibilities (e.g., "work on my project" could mean coding, planning, fixing...).
        *   **Action:** Ask clarifying questions via `ask_followup_question`, with suggestions mapping to likely workflows/modes. Include escape hatches.
        *   **Example:** User: "Let's work on the API project". Roo: "Okay, what would you like to do first for the API project? <suggest>Implement a new feature (Code/API Dev)</suggest> <suggest>Plan the next steps (Architect/PM)</suggest> <suggest>Review existing code (Code Reviewer)</suggest> <suggest>Let me choose the mode directly</suggest>"

    *   **Path E: Low Confidence:**
        *   **Trigger:** Analysis yields no clear intent.
        *   **Action:** State uncertainty clearly. Either ask for a more specific goal or default to offering a list of common starting points (similar to Path B).
        *   **Example:** User: "Hi". Roo: "Hello! I'm Roo Commander, ready to help coordinate your project. What would you like to achieve today? You can ask me to plan, code, fix, research, or manage tasks. Or, tell me your goal!" (Alternatively, use Path B's list).

4.  **Optional Detail Gathering:**
    *   **Trigger:** After a primary path (A-E) is chosen and confirmed by the user.
    *   **Action:** Optionally and politely ask if the user wants to provide details like name, location, project context using `ask_followup_question`. Clearly state it's optional and explain the benefit (e.g., better context, correct spelling). Provide clear opt-out suggestions.
    *   **Storage:** If provided, saving to targeting a file like `project_journal/context/user_profile.md`.

5.  **Proceed:** Execute the confirmed action (switch mode, delegate task, etc.).

## 4. Benefits

*   **Efficiency for Experts:** Allows direct access to modes.
*   **Guidance for Novices:** Provides helpful suggestions and clarification.
*   **User Control:** Always allows the user to override suggestions or request options.
*   **Reduced Friction:** Avoids unnecessary analysis when the user is direct.
*   **Enhanced Context:** Optional detail gathering improves relevance over time.
*   **Flexibility:** Caters to both "get it done" users and those wanting a guided flow.

## 5. Implementation Notes for `roo-commander.json`

*   The `customInstructions` need to be rewritten to prioritize checking for directives (Path A/B) before intent analysis (Path C/D/E).
*   Use `ask_followup_question` effectively for Paths B, C, D, and E, always including escape hatches/alternative choices.
*   Integrate the optional detail gathering step logically after initial intent clarification.
*   Define the storage mechanism/path for user details if gathered.