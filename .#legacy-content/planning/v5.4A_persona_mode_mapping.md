# Roo Commander v5.2: Persona Definitions, Mode Mapping & Workflows

**Version:** 1.0
**Date:** 2025-04-05
**Task ID:** TASK-TA-20250405-182300

## 1. Introduction

This document refines the user personas for Roo Commander, maps relevant modes and typical workflows to each persona, and outlines potential strategies for identifying or selecting a user's current persona within the system. This aims to guide the development of more tailored and intuitive user experiences.

The personas defined here are based on the initial exploration in `project_journal/ideas/personas_and_flexible_workflows/personas.md`.

## 2. Persona Identification & Selection Strategies

Providing the right modes and assistance depends on understanding the user's current goal or "persona". The system could employ one or more of the following strategies:

*   **A. Explicit User Selection:**
    *   **Initial Choice:** Prompt the user to select a primary persona or goal when initiating a new major task or project context.
    *   **Manual Switching:** Provide a command (e.g., `/set_persona <persona_name>`) or UI element allowing users to explicitly switch their active persona context if their goal changes.
*   **B. Implicit System Suggestion:**
    *   **Prompt Analysis:** Analyze keywords and intent in the user's initial request (e.g., "design architecture" suggests Planner, "fix this bug" suggests Fixer, "learn react" suggests Learner).
    *   **Context Analysis:** Examine the workspace context (e.g., presence of `.git` directory suggests Adopter, an empty directory suggests Planner/Vibe Coder, specific file types open suggest relevant Specialist modes).
    *   **Command Analysis:** Infer intent from initial commands (e.g., `git clone` suggests Adopter, `npm create` suggests Vibe Coder/Prototyper).
    *   **Workflow Patterns:** Observe sequences of mode usage or commands to suggest a relevant persona or workflow adjustments.
*   **C. Hybrid Approach:**
    *   Combine implicit analysis to *suggest* a persona, which the user can then confirm or override explicitly. This offers guidance without being overly restrictive.

The optimal approach may involve a combination, potentially configurable by the user. Initial implementation could focus on explicit selection or simple prompt analysis.

## 3. Refined Personas, Mode Mappings & Workflows

### 3.1. The Planner

*   **Goal:** Build something new with upfront structure and planning.
*   **Entry:** Clear requirements, specifications, project brief.
*   **Core Needs:** Structured planning, architectural design, task breakdown, guided implementation, traceability.
*   **Primary Modes:**
    *   `Technical Architect`: Define architecture, select technology.
    *   `Project Manager`: Break down work (WBS), define tasks.
    *   `Diagramer`: Visualize architecture, flows.
    *   `Technical Writer`: Formalize requirements, document design.
*   **Secondary/Implementation Modes:** `Code`, `Frontend Developer`, `API Developer`, `Database Specialist`, `Code Reviewer`, `Secretary` (for logging).
*   **Example Workflow:**
    1.  Start with `Technical Architect` to analyze requirements (`read_file`) and design high-level architecture.
    2.  Use `Diagramer` (delegated) to create architecture diagrams.
    3.  Use `Project Manager` (delegated or direct) to create epics/stories/tasks based on the architecture.
    4.  Use `Technical Writer` (delegated) to document key decisions or refine specs.
    5.  Transition to implementation modes (`Code`, Specialists) guided by the plan.
    6.  Use `Code Reviewer` for adherence checks.
    7.  Use `Secretary` throughout to log progress and decisions.

### 3.2. The Vibe Coder

*   **Goal:** Build something new, figuring out the structure and details along the way.
*   **Entry:** General idea, inspiration, desire to start coding quickly.
*   **Core Needs:** Rapid start, flexible development, emergent design support, later-stage structuring/refactoring.
*   **Primary Modes:**
    *   `Code`: Core implementation.
    *   `Project Initializer`: Basic project setup.
    *   `Refactor Specialist`: Clean up and structure code later.
*   **Secondary/Supporting Modes:** `Technical Architect` (for *post-hoc* documentation), `Diagramer` (for *post-hoc* visualization), `Project Manager` (if structure is needed later), `Secretary` (passive logging), `Git Manager`.
*   **Example Workflow:**
    1.  Use `Project Initializer` for minimal setup (e.g., basic web server, script file).
    2.  Jump into `Code` mode for core implementation, iterating quickly.
    3.  Use `Git Manager` for version control as needed.
    4.  Once patterns emerge, optionally use `Refactor Specialist` to improve structure.
    5.  Optionally, use `Technical Architect` or `Diagramer` (delegated) to document the emerged design.
    6.  Optionally, use `Project Manager` to organize tasks if the project grows.
    7.  `Secretary` can passively log significant code blocks or decisions.

### 3.3. The Adopter

*   **Goal:** Understand and work on an existing project (local or Git repository).
*   **Entry:** Existing codebase.
*   **Core Needs:** Codebase understanding, onboarding, safe integration of changes, targeted modifications.
*   **Primary Modes:**
    *   `Research & Context Builder`: Analyze existing code, summarize functionality.
    *   `Discovery Agent`: Explore code structure, find definitions (`list_code_definition_names`, `search_files`).
    *   `Project Onboarding`: Guided tour of project structure/setup.
    *   `Git Manager`: Branching, merging, managing changes.
    *   `Code` / Specialist Modes (`Frontend Developer`, `API Developer`, `Bug Fixer`, etc.): Making changes.
*   **Secondary/Supporting Modes:** `Code Reviewer`, `Refactor Specialist`, `Technical Writer` (for updating docs).
*   **Example Workflow:**
    1.  Clone repo using `Git Manager` (or point Roo to existing local repo).
    2.  Use `Project Onboarding` for initial orientation.
    3.  Use `Research & Context Builder` / `Discovery Agent` to understand relevant parts of the codebase (`read_file`, `search_files`, `list_code_definition_names`).
    4.  Use `Git Manager` to create a new branch.
    5.  Use `Code` or specific `Specialist` modes to implement changes/features/fixes.
    6.  Use `Refactor Specialist` if needed.
    7.  Use `Git Manager` to commit and push changes (or create PR).
    8.  Optionally use `Technical Writer` to update documentation.

### 3.4. The Explorer

*   **Goal:** Brainstorm, research possibilities, and define an idea or concept.
*   **Entry:** Vague concept, question, area of interest, problem without a clear solution.
*   **Core Needs:** Idea generation, information gathering, concept structuring, feasibility analysis.
*   **Primary Modes:**
    *   `Discovery Agent`: Broad exploration, finding related concepts.
    *   `Research & Context Builder`: Deep dives, information synthesis, web searches (if browser tool available).
    *   `Technical Architect`: Shape ideas, define high-level structure.
    *   `Diagramer`: Visualize concepts, mind maps.
    *   `Technical Writer`: Draft outlines, proposals, summaries.
    *   `Secretary`: Capture notes, links, ideas quickly.
*   **Secondary/Supporting Modes:** `Ask` (for clarification), `Second Opinion`.
*   **Example Workflow:**
    1.  Start with `Discovery Agent` or `Research & Context Builder` to explore a topic.
    2.  Use `Secretary` to log interesting findings, links, or questions.
    3.  Use `Technical Architect` or `Diagramer` (delegated) to start structuring concepts.
    4.  Refine understanding with `Research & Context Builder`.
    5.  Use `Technical Writer` to draft an initial outline or summary of the concept.
    6.  Iterate between research, structuring, and writing.

### 3.5. The Fixer

*   **Goal:** Solve a specific problem, fix a bug, add a small, well-defined feature, or create a utility script.
*   **Entry:** Bug report, specific requirement, existing code needing a targeted fix or enhancement.
*   **Core Needs:** Problem diagnosis, code analysis, precise implementation, verification.
*   **Primary Modes:**
    *   `Bug Fixer`: Diagnose and fix errors.
    *   `Code`: Implement small features or fixes.
    *   `Research & Context Builder`: Understand surrounding code before making changes.
    *   `Discovery Agent`: Locate relevant code (`search_files`).
    *   `Refactor Specialist`: Improve code quality during the fix.
*   **Secondary/Supporting Modes:** `Integration Tester`, `E2E Tester` (for verification), `Git Manager`, `Code Reviewer`.
*   **Example Workflow:**
    1.  Use `Discovery Agent` (`search_files`) or `Research & Context Builder` to locate the relevant code area based on the bug report/requirement.
    2.  Use `Research & Context Builder` (`read_file`) to understand the context.
    3.  Use `Bug Fixer` or `Code` mode to implement the fix or feature, potentially using precise tools like `apply_diff` or `insert_content`.
    4.  Optionally use `Refactor Specialist` to clean up related code.
    5.  Use testing modes (`Integration Tester`, `E2E Tester`) or guide the user to run tests.
    6.  Use `Git Manager` to commit the fix.

### 3.6. The Learner

*   **Goal:** Learn a new technology, framework, or concept by building a small project or example.
*   **Entry:** Tutorial idea, desire to practice a specific skill.
*   **Core Needs:** Guided implementation, clear explanations, scaffolding, code examples, practice opportunities.
*   **Primary Modes:**
    *   `Code`: Step-by-step implementation with explanations.
    *   `Project Initializer`: Set up learning project templates.
    *   `Ask`: Answer specific questions about concepts or code.
    *   `Research & Context Builder`: Explain existing code snippets or concepts.
*   **Secondary/Supporting Modes:** `Technical Writer` (to document learning), `Git Manager`.
*   **Example Workflow:**
    1.  Use `Project Initializer` to set up a basic project structure for the technology being learned.
    2.  Use `Code` mode to guide the user through building features step-by-step, providing explanations for each part.
    3.  Integrate `Ask` mode capabilities (or use `Ask` mode directly) to answer user questions.
    4.  Use `Research & Context Builder` to analyze and explain code snippets (either provided by the user or generated).
    5.  Suggest small exercises or modifications to reinforce learning.

### 3.7. The Documenter

*   **Goal:** Create, update, or improve project documentation (READMEs, API docs, guides, etc.).
*   **Entry:** Existing code needing documentation, a project concept requiring formal docs.
*   **Core Needs:** Code analysis, structured writing assistance, content generation, consistency checking.
*   **Primary Modes:**
    *   `Technical Writer`: Draft and format documentation.
    *   `Research & Context Builder`: Analyze code to inform documentation content.
    *   `Discovery Agent`: Understand code structure (`list_code_definition_names`).
    *   `Diagramer`: Create diagrams for documentation.
*   **Secondary/Supporting Modes:** `Code Reviewer` (for reviewing documentation accuracy/clarity), `Secretary` (for quick notes).
*   **Example Workflow:**
    1.  Use `Research & Context Builder` or `Discovery Agent` to analyze the code needing documentation.
    2.  Use `Technical Writer` to draft the documentation structure and content, potentially auto-generating stubs based on code analysis.
    3.  Delegate diagram creation to `Diagramer` if needed.
    4.  Refine content using `Technical Writer`.
    5.  Optionally use `Code Reviewer` persona/mode to check for technical accuracy and clarity.

### 3.8. The Prototyper

*   **Goal:** Quickly build a functional proof-of-concept (PoC) or test a specific technical idea.
*   **Entry:** Hypothesis, feature idea needing validation, technical spike.
*   **Core Needs:** Rapid setup, minimal boilerplate, fast iteration, focus on core functionality.
*   **Primary Modes:**
    *   `Project Initializer`: Quick setup with minimal templates (e.g., basic HTML/JS, simple API).
    *   `Code`: Rapid implementation of core logic.
    *   Specialist Modes (`Frontend Developer`, `API Developer`, `Database Specialist`): Quick building blocks.
*   **Secondary/Supporting Modes:** `Git Manager`, `Secretary` (to log findings).
*   **Example Workflow:**
    1.  Use `Project Initializer` for a barebones setup.
    2.  Use `Code` or relevant `Specialist` modes to implement the core feature/logic quickly.
    3.  Iterate rapidly, testing the concept.
    4.  Focus is on speed and proving the idea, not necessarily clean code (refactoring can come later if the prototype is successful).
    5.  Use `Secretary` to log results or key learnings from the prototype.

### 3.9. The Brainstormer

*   **Goal:** Generate, explore, and flesh out new ideas, often collaboratively or with AI assistance.
*   **Entry:** Broad topic, problem area, desire for innovation, "what if" questions.
*   **Core Needs:** Idea generation prompts, structured exploration, concept mapping, comparative analysis, quick capture of thoughts.
*   **Primary Modes:**
    *   `Discovery Agent`: Suggest related concepts, ask probing questions.
    *   `Ask`: Provide different perspectives, answer exploratory questions.
    *   `Diagramer`: Create mind maps, concept flows.
    *   `Secretary`: Rapidly log ideas, snippets, links, discussion points.
    *   `Research & Context Builder`: Explore implications or feasibility of ideas.
*   **Secondary/Supporting Modes:** `Technical Writer` (to summarize sessions), `Second Opinion`.
*   **Example Workflow:**
    1.  Start with `Discovery Agent` or `Ask` to explore a topic or problem space.
    2.  Use `Secretary` to capture raw ideas as they emerge.
    3.  Use `Diagramer` (delegated) to create a mind map or concept flow.
    4.  Use `Ask` or `Research & Context Builder` to analyze pros/cons or feasibility of different ideas.
    5.  Refine promising ideas, potentially transitioning to the `Explorer` persona/workflow.
    6.  Use `Technical Writer` to summarize the brainstorming session if needed.