# OpenAPI Specification (OAS) / Swagger Guide

Basics of documenting RESTful APIs using the OpenAPI 3.x specification (often written in YAML or JSON).

## Core Concept

OpenAPI Specification (formerly Swagger Specification) provides a standard, language-agnostic interface description for RESTful APIs. It allows both humans and computers to discover and understand the capabilities of the service without access to source code, documentation, or network traffic inspection.

An OpenAPI document defines:
*   General API information (version, title, description).
*   Available paths (endpoints).
*   Operations (HTTP methods: GET, POST, PUT, DELETE, etc.) available on each path.
*   Parameters for each operation (path, query, header, cookie).
*   Request bodies for operations like POST, PUT, PATCH.
*   Response structures for each operation, including different status codes.
*   Security schemes (API keys, OAuth2, JWT, etc.).
*   Reusable components (schemas, responses, parameters, etc.).

## Basic Structure (YAML Example)

```yaml
openapi: 3.0.3 # Specification version
info:
  title: Simple User API
  description: An example API for managing users.
  version: 1.0.0
servers:
  - url: https://api.example.com/v1
    description: Production server
  - url: http://localhost:3000/v1
    description: Development server

tags: # Optional grouping for operations
  - name: Users
    description: Operations about users

paths: # API endpoints
  /users: # Path item
    get: # Operation (HTTP GET)
      tags: [Users] # Link to tag
      summary: List all users
      description: Returns a list of all registered users.
      operationId: listUsers # Unique ID for the operation
      parameters: # Query parameters
        - name: limit
          in: query
          description: Maximum number of users to return
          required: false
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 20
      responses:
        '200': # Successful response
          description: A list of users.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User' # Reference a reusable schema
        '400': # Error response
          $ref: '#/components/responses/BadRequest' # Reference a reusable response

    post: # Operation (HTTP POST)
      tags: [Users]
      summary: Create a new user
      operationId: createUser
      requestBody: # Define the request body
        description: User object to be added
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NewUser'
      responses:
        '201':
          description: User created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          $ref: '#/components/responses/BadRequest'

  /users/{userId}: # Path with a parameter
    parameters: # Path parameters
      - name: userId
        in: path
        required: true
        description: ID of the user to retrieve
        schema:
          type: string
          format: uuid # Example format
    get:
      tags: [Users]
      summary: Get user by ID
      operationId: getUserById
      responses:
        '200':
          description: User details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '404':
          $ref: '#/components/responses/NotFound'

components: # Reusable definitions
  schemas: # Data models
    User:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true # Indicates this is generated by the server
        name:
          type: string
        email:
          type: string
          format: email
      required:
        - id
        - name
        - email
    NewUser:
      type: object
      properties:
        name:
          type: string
        email:
          type: string
          format: email
      required:
        - name
        - email
  responses: # Reusable response definitions
    NotFound:
      description: The specified resource was not found.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    BadRequest:
      description: Invalid request syntax or parameters.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
  securitySchemes: # Define security mechanisms
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-KEY

security: # Apply security schemes globally or per-operation
  - ApiKeyAuth: [] # Requires ApiKeyAuth for all operations unless overridden

```

## Key Sections Explained

*   **`openapi`**: Version of the OpenAPI Specification.
*   **`info`**: Metadata about the API (title, version, description).
*   **`servers`**: Base URLs for the API (production, staging, development).
*   **`tags`**: Used to group related operations in documentation tools.
*   **`paths`**: Defines the available endpoints (URLs).
    *   Each path (`/users`, `/users/{userId}`) contains operations.
    *   **Operations** (e.g., `get`, `post`): Define HTTP methods. Include `summary`, `description`, `operationId`, `tags`, `parameters`, `requestBody`, `responses`, `security`.
    *   **`parameters`**: Define path (`in: path`), query (`in: query`), header (`in: header`), or cookie (`in: cookie`) parameters. Includes `name`, `in`, `required`, `description`, `schema`.
    *   **`requestBody`**: Describes the payload for POST/PUT/PATCH. Includes `description`, `required`, `content` (media types like `application/json` and their `schema`).
    *   **`responses`**: Defines possible HTTP status code responses (e.g., `'200'`, `'404'`). Includes `description`, `content` (media types and `schema`).
*   **`components`**: Reusable definitions.
    *   **`schemas`**: Defines data structures (objects) used in requests and responses using JSON Schema syntax (`type`, `properties`, `required`, `format`, etc.). Use `$ref: '#/components/schemas/SchemaName'` to reference them.
    *   **`responses`**: Reusable response definitions.
    *   **`parameters`**: Reusable parameter definitions.
    *   **`securitySchemes`**: Defines authentication/authorization methods (API Key, HTTP Basic/Bearer, OAuth2).
*   **`security`**: Applies defined `securitySchemes` globally or to specific operations.

## Tools & Benefits

*   **Documentation Generation:** Tools like Swagger UI, Redoc, Stoplight Elements can generate interactive API documentation from the spec.
*   **Code Generation:** Tools can generate server stubs and client SDKs in various languages.
*   **Testing:** Can be used for contract testing and automated API testing.
*   **Design-First:** Encourages designing the API contract before implementation.

*(Refer to the official OpenAPI Specification: https://spec.openapis.org/oas/v3.0.3 and Swagger tools: https://swagger.io/)*