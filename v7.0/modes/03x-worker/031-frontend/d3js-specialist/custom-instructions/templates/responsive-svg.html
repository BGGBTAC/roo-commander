<!DOCTYPE html>
<html>
<head>
  <title>Responsive D3 SVG Template</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    /* Basic styling for the container */
    .chart-container {
      width: 100%;
      max-width: 800px; /* Example max width */
      margin: auto;
      border: 1px solid #ccc; /* For visualization */
    }
    /* SVG takes full width of container */
    svg {
      display: block; /* Remove extra space below SVG */
      width: 100%;
      height: auto; /* Maintain aspect ratio */
      background-color: #f9f9f9; /* Example background */
    }
    /* Example styles for chart elements */
    .axis path,
    .axis line {
      fill: none;
      stroke: #333;
      shape-rendering: crispEdges;
    }
    .axis text {
      font-size: 10px;
      fill: #555;
    }
  </style>
</head>
<body>

<div id="chart-container" class="chart-container">
  {/* SVG will be appended here by D3 */}
</div>

<script src="https://d3js.org/d3.v7.min.js"></script>
<script>
  // --- D3 Code ---

  // 1. Select the container and get its width
  const container = d3.select("#chart-container");
  const containerWidth = container.node().getBoundingClientRect().width;

  // 2. Define margins and dimensions based on container width
  const margin = { top: 20, right: 30, bottom: 40, left: 50 };
  const width = containerWidth - margin.left - margin.right;
  // Define height based on desired aspect ratio or fixed value
  const aspectRatio = 0.6; // Example: height is 60% of width
  const height = width * aspectRatio;
  // const height = 400 - margin.top - margin.bottom; // Alternative: Fixed height

  // 3. Create SVG element using viewBox for responsiveness
  const svg = container.append("svg")
      // Use viewBox to define internal coordinate system
      .attr("viewBox", `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
      // Optionally set preserveAspectRatio (default is xMidYMid meet)
      // .attr("preserveAspectRatio", "xMidYMid meet")
    .append("g")
      .attr("transform", `translate(${margin.left},${margin.top})`);

  // --- Your D3 chart logic goes here ---
  // Example: Add a placeholder rectangle
  svg.append('rect')
    .attr('width', width)
    .attr('height', height)
    .attr('fill', 'lightblue');

  // Example: Scales (adjust domain based on your data)
  const xScale = d3.scaleLinear().domain([0, 100]).range([0, width]);
  const yScale = d3.scaleLinear().domain([0, 100]).range([height, 0]);

  // Example: Axes
  const xAxis = d3.axisBottom(xScale);
  svg.append("g")
    .attr("transform", `translate(0, ${height})`)
    .call(xAxis);

  const yAxis = d3.axisLeft(yScale);
  svg.append("g")
    .call(yAxis);

  // --- End D3 chart logic ---

  // Note: For dynamic resizing (e.g., window resize), you might need
  // to wrap this in a function, remove the old SVG, and redraw
  // based on the new container width, potentially using ResizeObserver.

</script>

</body>
</html>